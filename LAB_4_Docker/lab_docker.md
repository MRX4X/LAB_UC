# Лабораторная работа № 1. Основы Docker

**Цель работы:** освоить базовые понятия и команды Docker, научиться работать с образами, контейнерами и Docker Compose.

**НАСТОЯТЕЛЬНО РЕКОМЕНДУЮ ВЫПОЛНЯТЬ КОМАНДЫ ВРУЧНУЮ ДЛЯ ЛУЧШЕГО ЗАПОМИНАНИЯ!!!**

---

## Подготовка к работе

### Требования
- ОС: Ubuntu 22.04/24.04 или другая Linux с поддержкой Docker
- Подключение к интернету
- Docker должен быть установлен

### Проверка установки Docker
1. Узнайте версию Docker Engine.
2. Скачайте и запустите тестовый образ `hello-world`, чтобы убедиться, что Docker работает.

---

## Часть 1. Работа с образами

### Задание 1.1. Скачивание и просмотр образов
1. Скачайте образ Ubuntu 22.04 из реестра (Docker Hub).
2. Выведите список локально сохранённых образов. Найдите в списке образ `ubuntu` с тегом `22.04`.

**Пояснение:** команда скачивания образа принимает имя и тег в формате `репозиторий:тег`. Если тег не указан, используется `latest`.

---

### Задание 1.2. Скачивание дополнительного образа
1. Скачайте образ веб-сервера Nginx на базе Alpine (минимальный дистрибутив).
2. Снова выведите список образов и убедитесь, что `nginx:alpine` появился в списке.

**Пояснение:** образ называется `nginx:alpine`. Alpine — лёгкий дистрибутив, размер образа меньше.

---

## Часть 2. Работа с контейнерами

### Задание 2.1. Запуск контейнера в интерактивном режиме
1. Создайте и запустите контейнер из образа Ubuntu 22.04 в интерактивном режиме с оболочкой bash. Нужны опции, чтобы оставался ввод и псевдотерминал.
2. Внутри контейнера выведите информацию о дистрибутиве, имя хоста и текущую директорию.
3. Выйдите из контейнера (контейнер остановится).

---

### Задание 2.2. Запуск контейнера в фоновом режиме
1. Запустите контейнер из образа Nginx в фоне. Задайте ему имя `my-web`. Пробросьте порт 80 контейнера на порт 8080 хоста.
2. Проверьте, что контейнер запущен (выведите только запущенные контейнеры).
3. Откройте в браузере `http://localhost:8080` — должна появиться страница приветствия Nginx.

---

### Задание 2.3. Управление контейнером
1. Остановите контейнер `my-web`.
2. Проверьте списком только запущенных контейнеров, затем всех — убедитесь, что контейнер в статусе Exited.
3. Снова запустите контейнер `my-web` (не создавайте новый).
4. Просмотрите логи контейнера. У команды логов есть опция для слежения за новыми строками в реальном времени.

---

### Задание 2.4. Выполнение команд внутри работающего контейнера
1. Пока контейнер `my-web` запущен, выполните команду внутри него в интерактивном режиме. Запустите оболочку (в Alpine нет bash, используйте sh).
2. Внутри контейнера выведите содержимое каталога `/usr/share/nginx/html` (HTML-файлы Nginx) и выйдите.

---

### Задание 2.5. Удаление контейнера
1. Остановите контейнер `my-web`.
2. Удалите контейнер. Есть опция принудительного удаления запущенного контейнера.
3. Убедитесь, что контейнер удалён (выведите все контейнеры).

---

### Задание 2.6. Проброс собственной HTML-страницы
1. Создайте каталог `html` (например, в `~/lab_docker` или текущей директории).
2. Создайте в нём файл `index.html` с вашими данными: **имя**, **фамилия** и **группа** (оформите как HTML-страницу).
3. Запустите контейнер Nginx в фоне с пробросом порта 8080 и примонтируйте папку `html` к каталогу `/usr/share/nginx/html` в контейнере (bind mount).
4. Откройте в браузере `http://localhost:8080` — должна отображаться ваша страница с данными.

**Пояснение:** опция `-v` для монтирования: `-v путь_на_хосте:путь_в_контейнере`. Например, `-v $(pwd)/html:/usr/share/nginx/html`. Папка на хосте заменит содержимое каталога Nginx в контейнере.

---

## Часть 3. Docker Compose

### Задание 3.1. Создание простого docker-compose.yaml
1. Создайте каталог `~/lab_docker` и перейдите в него.
2. Создайте файл `docker-compose.yaml` с двумя сервисами:
   - **web:** образ `nginx:alpine`, имя контейнера `lab-nginx`, проброс порта 8080 на 80;
   - **app:** образ `alpine:latest`, имя контейнера `lab-alpine`, команда по умолчанию — `sleep 3600` (чтобы контейнер не завершился сразу).
3. Запустите все сервисы в фоне.
4. Проверьте статус контейнеров проекта.
5. Откройте в браузере `http://localhost:8080`.

**Пояснение:** см.ридми с теорией

---

### Задание 3.2. Просмотр логов и остановка
1. Просмотрите логи всех сервисов с отслеживанием в реальном времени (выход — Ctrl+C).
2. Остановите и удалите все контейнеры проекта.

---

## Часть 4. Создание образа с помощью Dockerfile (дополнительно)

### Задание 4.1. Сборка собственного образа
1. В каталоге `~/lab_docker` создайте файл `Dockerfile`. Базовый образ — `nginx:alpine`. Добавьте инструкцию, которая записывает в `/usr/share/nginx/html/index.html` строку `<h1>Мой первый Docker-образ</h1>` (перезапись).
2. Соберите образ с тегом `my-nginx:v1`.
3. Запустите контейнер из своего образа в фоне: порт 9090 на хосте → 80 в контейнере, имя `my-custom-nginx`.
4. Откройте `http://localhost:9090` и убедитесь, что отображается текст «Мой первый Docker-образ».
5. Остановите и удалите контейнер.

**Пояснение:** см.ридми с теорией

---

## Требования к отчёту

В отчёт включите:
1. **Титульный лист**
2. **Ход работы** — описание выполненных шагов по каждой части
3. **Скриншоты** — выводы команд и страницы в браузере
4. **Выводы** — что изучено, какие навыки получены
